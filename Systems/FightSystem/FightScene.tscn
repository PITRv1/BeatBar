[gd_scene load_steps=17 format=3 uid="uid://bq5msg8cvapkn"]

[ext_resource type="Script" uid="uid://b5o4ecqcegu0o" path="res://Systems/FightSystem/FightManager.cs" id="1_fcsjg"]
[ext_resource type="Theme" uid="uid://db6j0xu6r0484" path="res://Assets/GameTheme.tres" id="2_e1xvf"]
[ext_resource type="FontFile" uid="uid://d0480bk3i77km" path="res://Assets/Fonts/Montague.ttf" id="3_6h1pc"]
[ext_resource type="Texture2D" uid="uid://b0vg6mhjc386m" path="res://Assets/Images/BeatMeaterBase.png" id="3_ima3f"]
[ext_resource type="FontFile" uid="uid://ciq30a7ewl7n" path="res://Assets/Fonts/TEXAT BOLD PERSONAL USE___.otf" id="3_q7xpu"]
[ext_resource type="StyleBox" uid="uid://cb4okpax0kla1" path="res://Assets/FightButtonPanel.tres" id="4_ima3f"]
[ext_resource type="Texture2D" uid="uid://vcpjowwlmgw1" path="res://Assets/Images/BeatMeaterTop.png" id="4_qdnc6"]
[ext_resource type="Texture2D" uid="uid://dusr5mrsde3re" path="res://Systems/NpcSystem/Npcs/PlayerIcon.png" id="4_xdb1m"]
[ext_resource type="Texture2D" uid="uid://ck8t8lgojjm78" path="res://Systems/NpcSystem/Npcs/BeaterIcon.png" id="5_qdnc6"]

[sub_resource type="LabelSettings" id="LabelSettings_swktf"]
font = ExtResource("3_6h1pc")
font_size = 300
outline_size = 145
outline_color = Color(0, 0, 0, 1)
stacked_shadow_count = 1
stacked_shadow_0/offset = Vector2(27, 27)
stacked_shadow_0/color = Color(0, 0, 0, 0.08235294)
stacked_shadow_0/outline_size = 100

[sub_resource type="Animation" id="Animation_e1xvf"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("RichTextLabel:text")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": ["3"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("RichTextLabel:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("RichTextLabel:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}
tracks/3/type = "bezier"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("RichTextLabel:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="Animation" id="Animation_swktf"]
resource_name = "countDown"
length = 3.6805
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("RichTextLabel:text")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2, 3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": ["3", "2", "1", "BEAT!"]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("RichTextLabel:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.11, 3.2333333, 3.5666666),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("RichTextLabel:scale")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(1.4901161e-08, 0.13333334, 0.8666667, 1, 1.1333333, 1.8666668, 2, 2.1333334, 2.8666666, 3, 3.1333332),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Vector2(1.1, 1.1), Vector2(0.9, 0.9), Vector2(0.9, 0.9), Vector2(1.2, 1.2), Vector2(0.9, 0.9), Vector2(0.9, 0.9), Vector2(1.3, 1.3), Vector2(0.9, 0.9), Vector2(0.9, 0.9), Vector2(1.4, 1.4), Vector2(0.9, 0.9)]
}
tracks/3/type = "bezier"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("RichTextLabel:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"handle_modes": PackedInt32Array(0, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0, 0.43284166, -0.011666667, -0.07214028, 0, 0, -0.43458697, -0.015, 0.14457145, 0, 0, 0, -0.011666669, -0.07243116, 0, 0, 0, -0.25, 0, 0.25, 0, 0.43284166, -0.011666667, -0.07214028, 0, 0, -0.43458697, -0.015, 0.14457145, 0, 0, 0, -0.011666669, -0.07243116, 0, 0, 0, -0.25, 0, 0.25, 0, 0.43284166, -0.011666667, -0.07214028, 0, 0, -0.43458697, -0.015, 0.14457145, 0, 0, 0, -0.011666669, -0.07243116, 0, 0, 0, -0.25, 0, 0.25, 0, 0.43284166, -0.011666667, -0.07214028, 0, 0, -0.43458697, -0.015, 0.14457145, 0, 0, 0, -0.011666669, -0.07243116, 0, 0),
"times": PackedFloat32Array(0, 0.07, 0.16, 0.23, 0.9366666, 1.0066667, 1.0966666, 1.1666666, 1.93, 2, 2.09, 2.1599998, 2.86, 2.9299998, 3.02, 3.09)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_6h1pc"]
_data = {
&"RESET": SubResource("Animation_e1xvf"),
&"countDown": SubResource("Animation_swktf")
}

[sub_resource type="Animation" id="Animation_mooue"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Control/RichTextLabel2:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(-216, -189)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Control/RichTextLabel2:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1.455, 1.455)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Control/RichTextLabel2:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.4956735]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Control/RichTextLabel2:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Control/RichTextLabel2:modulate")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_ima3f"]
resource_name = "dispMult"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Control/RichTextLabel2:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.26666668, 0.96666664),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(-216, -189), Vector2(-221, -253)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Control/RichTextLabel2:scale")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.0333333, 0.12767567, 0.16666667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(1.455, 1.455), Vector2(0.825, 0.825), Vector2(1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Control/RichTextLabel2:rotation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.0333333, 0.123333335, 0.16666667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.4956735, -0.6614797865058505, 0.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Control/RichTextLabel2:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Control/RichTextLabel2:modulate")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 0.11, 0.4302115, 0.9),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_xdb1m"]
_data = {
&"RESET": SubResource("Animation_mooue"),
&"dispMult": SubResource("Animation_ima3f")
}

[node name="FightScene" type="Control" node_paths=PackedStringArray("playerOneBeatMeater", "playerTwoBeatMeater", "playerOneMultiplierDisplay", "playerOneMultiplierDisplayHolder", "playerOneMultiplierDisplayAnimator", "countdownAnimator", "fightButton")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_fcsjg")
playerOneBeatMeater = NodePath("HBoxContainer/Control/PlayerOneBeatMeater")
playerTwoBeatMeater = NodePath("HBoxContainer/Control2/PlayerTwoBeatMeater")
playerOneMultiplierDisplay = NodePath("PlayerOneCritHolder/Control/RichTextLabel2")
playerOneMultiplierDisplayHolder = NodePath("PlayerOneCritHolder")
playerOneMultiplierDisplayAnimator = NodePath("PlayerOneCritHolder/AnimationPlayer")
countdownAnimator = NodePath("AnimationPlayer")
fightButton = NodePath("SpaceBarHolder/Button")

[node name="HBoxContainer" type="HBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Control" type="Control" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="PlayerOneBeatMeater" type="ProgressBar" parent="HBoxContainer/Control"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_left = 86.0
offset_top = 73.0
offset_right = 165.0
offset_bottom = -73.0
grow_vertical = 2
theme = ExtResource("2_e1xvf")
value = 100.0
fill_mode = 3
show_percentage = false

[node name="TextureRect" type="TextureRect" parent="HBoxContainer/Control"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 56.927277
offset_top = -178.0
offset_right = 195.0
offset_bottom = -37.0
grow_vertical = 0
texture = ExtResource("3_ima3f")
expand_mode = 1
stretch_mode = 5

[node name="TextureRect" type="TextureRect" parent="HBoxContainer/Control/TextureRect"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 19.629032
offset_top = -625.0
offset_right = 187.03525
offset_bottom = -454.0
grow_vertical = 0
scale = Vector2(0.59999985, 1)
texture = ExtResource("4_qdnc6")
expand_mode = 1
stretch_mode = 5

[node name="TextureRect2" type="TextureRect" parent="HBoxContainer/Control"]
layout_mode = 0
offset_left = 99.0
offset_top = 562.0
offset_right = 283.0
offset_bottom = 694.0
texture = ExtResource("4_xdb1m")
expand_mode = 2
stretch_mode = 5

[node name="Control2" type="Control" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="PlayerTwoBeatMeater" type="ProgressBar" parent="HBoxContainer/Control2"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_left = 478.0
offset_top = 73.0
offset_right = 557.0
offset_bottom = -73.0
grow_vertical = 2
theme = ExtResource("2_e1xvf")
value = 100.0
fill_mode = 3
show_percentage = false

[node name="TextureRect3" type="TextureRect" parent="HBoxContainer/Control2"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 446.00003
offset_top = -178.0
offset_right = 584.07275
offset_bottom = -37.0
grow_vertical = 0
texture = ExtResource("3_ima3f")
expand_mode = 1
stretch_mode = 5

[node name="TextureRect" type="TextureRect" parent="HBoxContainer/Control2/TextureRect3"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 19.629032
offset_top = -625.0
offset_right = 187.03525
offset_bottom = -454.0
grow_vertical = 0
scale = Vector2(0.59999985, 1)
texture = ExtResource("4_qdnc6")
expand_mode = 1
stretch_mode = 5

[node name="TextureRect4" type="TextureRect" parent="HBoxContainer/Control2"]
layout_mode = 0
offset_left = 354.0
offset_top = 562.0
offset_right = 538.0
offset_bottom = 694.0
texture = ExtResource("5_qdnc6")
expand_mode = 2
stretch_mode = 5

[node name="RichTextLabel" type="Label" parent="."]
modulate = Color(1, 1, 1, 0)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -564.0
offset_top = -485.0
offset_right = 564.0
offset_bottom = 397.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(564, 441)
text = "3"
label_settings = SubResource("LabelSettings_swktf")
horizontal_alignment = 1
vertical_alignment = 1
metadata/_edit_lock_ = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_6h1pc")
}

[node name="SpaceBarHolder" type="Control" parent="."]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -268.0
offset_top = -206.0
offset_right = 268.0
offset_bottom = -97.0
grow_horizontal = 2
grow_vertical = 0

[node name="Button" type="Button" parent="SpaceBarHolder"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(268, 54.5)
theme_override_fonts/font = ExtResource("3_q7xpu")
theme_override_font_sizes/font_size = 70
theme_override_styles/normal = ExtResource("4_ima3f")
theme_override_styles/pressed = ExtResource("4_ima3f")
theme_override_styles/hover = ExtResource("4_ima3f")
theme_override_styles/focus = ExtResource("4_ima3f")
text = "SPACEBAR"

[node name="PlayerOneCritHolder" type="Control" parent="."]
anchors_preset = 0
offset_left = 732.0
offset_top = -87.0
offset_right = 1295.0
offset_bottom = 501.0
pivot_offset = Vector2(281.5, 294)

[node name="Control" type="Control" parent="PlayerOneCritHolder"]
anchors_preset = 0
offset_left = 281.0
offset_top = 294.0
offset_right = 281.0
offset_bottom = 294.0

[node name="RichTextLabel2" type="RichTextLabel" parent="PlayerOneCritHolder/Control"]
modulate = Color(1, 1, 1, 0)
layout_mode = 0
offset_left = -216.0
offset_top = -189.0
offset_right = 217.0
offset_bottom = 189.0
rotation = 0.4956735
scale = Vector2(1.455, 1.455)
pivot_offset = Vector2(216.5, 189)
theme_override_constants/outline_size = 40
theme_override_fonts/normal_font = ExtResource("3_6h1pc")
theme_override_font_sizes/normal_font_size = 80
bbcode_enabled = true
text = "[rainbow]1.5x"
fit_content = true
scroll_active = false
horizontal_alignment = 1
vertical_alignment = 1

[node name="AnimationPlayer" type="AnimationPlayer" parent="PlayerOneCritHolder"]
libraries = {
&"": SubResource("AnimationLibrary_xdb1m")
}

[connection signal="pressed" from="SpaceBarHolder/Button" to="." method="_OnPlayerOneBeat"]
